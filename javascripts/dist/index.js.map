{"version":3,"sources":["utilities.js","timeline_event.js","timeline.js","content.js","router.js","../../node_modules/whatwg-fetch/fetch.js","site.js","index.js"],"names":["addClass","el","className","classList","add","removeClass","remove","replace","RegExp","split","join","empty","hasChildNodes","removeChild","lastChild","tag","document","createElement","TimelineEvent","initialize","data","timeline","element","date","Date","endDate","color","title","type","url","addElement","position","width","yearsBetween","startDate","now","monthsBetween","setColor","setLeft","href","addEventListener","showEvent","bind","currentEventTimer","setTimeout","hideEvent","eventsElement","appendChild","currentEventElement","setCurrentEvent","getContent","header","content","textContent","description","addExpanding","monthWidth","months","style","background","left","apply","arguments","Timeline","site","querySelectorAll","events","id","yearsElement","event","clearTimeout","addEvent","push","renderYears","adjust","forEach","timeline_event","length","min","max","start","end","getFullYear","getMonth","i","elm","createNodeForYear","year","location","Content","body","updateContent","site_classes","Router","registerLinkListener","getLink","depth","index","parentNode","tagName","link","target","startsWith","stripOwnLocation","navigate","preventDefault","stopPropagation","window","fetchContent","pathname","host","port","parseHtml","aHTMLString","doc","DOMParser","parseFromString","response","innerHTML","that","fetch","then","text","history","pushState","support","searchParams","self","iterable","Symbol","blob","Blob","e","formData","arrayBuffer","isDataView","obj","DataView","prototype","isPrototypeOf","viewClasses","isArrayBufferView","ArrayBuffer","isView","indexOf","Object","toString","call","normalizeName","name","String","test","TypeError","toLowerCase","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","undefined","Headers","headers","map","append","Array","isArray","getOwnPropertyNames","consumed","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","fromCharCode","bufferClone","slice","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","get","rejected","Error","decode","json","JSON","parse","oldValue","has","hasOwnProperty","callback","thisArg","keys","values","entries","methods","normalizeMethod","method","upcased","toUpperCase","Request","input","options","credentials","mode","signal","referrer","form","trim","bytes","decodeURIComponent","parseHeaders","rawHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","clone","redirectStatuses","redirect","RangeError","DOMException","err","message","stack","create","constructor","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","onreadystatechange","readyState","removeEventListener","send","polyfill","Site","router","getData","sb","f","o","concat","sort","a","b","len","mx","sortBy","mn","defineProperty"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["export function addClass(el, className) {\n  if (el.classList)\n    el.classList.add(className);\n  else\n    el.className += ' ' + className;\n}\n\nexport function removeClass(el, className) {\n  if (el.classList)\n    el.classList.remove(className);\n  else\n    el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n}\n\nexport function empty(el) {\n  while (el.hasChildNodes()) {\n    el.removeChild(el.lastChild);\n  }\n}\n\nexport function el(tag) {\n  return document.createElement(tag);\n}\n","import {\n  el,\n  addClass,\n  removeClass\n} from './utilities'\n\nexport default function TimelineEvent() {\n\n  this.initialize = function (data, timeline) {\n    this.element = el('a');\n    this.element.classList.add('event')\n\n    this.data    = data;\n    this.date    = new Date(this.data.date);\n    this.endDate = new Date(this.data.endDate);\n\n    this.color = this.data.color;\n    this.title = this.data.title;\n    this.type  = this.data.type;\n    this.url   = this.data.url;\n\n    this.timeline = timeline;\n\n    this.addElement();\n  }\n\n  this.position = function () {\n    var yearsBetween = this.timeline.yearsBetween(this.timeline.startDate(), new Date(Date.now()));\n    var width  = 100/yearsBetween/12;\n    var monthsBetween = this.timeline.monthsBetween(this.timeline.startDate(), this.date);\n\n    return width*monthsBetween;\n  }\n\n  this.addElement = function () {\n    var yearsBetween = this.timeline.yearsBetween(this.timeline.startDate(), new Date(Date.now()));\n    var width  = 100/yearsBetween/12;\n\n    this.setColor(this.color);\n\n    this.setLeft();\n    //\n    // if (this.endDate) {\n    //   this.addExpanding(width);\n    // }\n\n    if (this.type) {\n      this.element.classList.add(this.type)\n    }\n\n    if (this.url) {\n      this.element.href = this.url;\n    }\n\n    this.element.addEventListener('mouseover', function () {\n      this.showEvent()\n    }.bind(this))\n\n\n    this.element.addEventListener('mouseout', function () {\n      this.timeline.currentEventTimer = setTimeout(function () {\n        this.hideEvent()\n      }.bind(this), 1000)\n    }.bind(this))\n\n    this.timeline.eventsElement.appendChild(this.element);\n  }\n\n  this.hideEvent = function () {\n    removeClass(this.timeline.currentEventElement, 'visible');\n  }\n\n  this.showEvent = function () {\n    this.timeline.setCurrentEvent(this);\n  }\n\n  this.getContent = function () {\n    var header = el('span');\n    var content = el('p');\n\n    header.textContent  = this.title;\n    content.textContent = this.description;\n\n    return { header: header, content: content };\n  }\n\n  this.addExpanding = function (monthWidth) {\n    var months = this.timeline.monthsBetween(this.date, this.endDate);\n\n    addClass(this.element, 'expanding');\n\n    this.element.addEventListener('mouseover', function () {\n      this.element.style.width = monthWidth*months + \"%\"\n      addClass(this.element, 'expanded');\n    }.bind(this));\n\n    this.element.addEventListener('mouseout', function () {\n      this.element.style.width = null;\n      removeClass(this.element, 'expanded');\n    }.bind(this))\n  }\n\n  this.setColor = function (color) {\n    this.element.style.background = '#' + color;\n  }\n\n  this.setLeft = function () {\n    this.element.style.left = this.position() + \"%\";\n  }\n\n  this.initialize.apply(this, arguments);\n}\n","//= require timeline_event\nimport TimelineEvent from './timeline_event.js';\nimport {\n  el,\n  empty,\n  removeClass,\n  addClass\n} from './utilities.js';\n\nexport default function Timeline () {\n\n  this.initialize = function (site) {\n    this.site    = site;\n    this.element = document.querySelectorAll('#timeline')[0];\n\n    this.events  = [];\n\n    this.eventsElement = el('div');\n    this.eventsElement.id = \"events\";\n    this.element.appendChild(this.eventsElement);\n\n    this.yearsElement = el('div');\n    this.yearsElement.id = \"years\";\n    this.element.appendChild(this.yearsElement);\n\n    this.currentEventElement = el('div');\n    this.currentEventElement.id = \"current-event\";\n    this.currentEventElement.classList.add('visible');\n    this.element.appendChild(this.currentEventElement);\n  }\n\n  this.setCurrentEvent = function (event) {\n    clearTimeout(this.currentEventTimer);\n\n    empty(this.currentEventElement);\n    removeClass(this.currentEventElement, 'visible');\n\n    var content = el('span');\n    var title = el('span');\n\n    title.classList.add('title');\n    title.textContent = event.title;\n\n    content.appendChild(title);\n\n    if (event.color)\n      content.style.color = '#' + event.color;\n\n    this.currentEventElement.appendChild(content);\n\n    addClass(this.currentEventElement, 'visible');\n  }\n\n  this.addEvent = function (data) {\n    this.events.push(new TimelineEvent(data, this));\n    empty(this.yearsElement);\n    this.renderYears();\n  }\n\n  this.adjust = function () {\n    this.events.forEach(function (timeline_event) {\n      timeline_event.setLeft();\n    })\n  }\n\n  this.startDate = function () {\n    if (this.events.length == 0) {\n      return new Date(Date.now());\n    }\n\n    return this.events.min(function (event) {\n      return event.date\n    }).date;\n  }\n\n  this.endDate = function () {\n    return this.events.max(function (event) {\n      return event.date\n    }).date;\n  }\n\n  this.monthsBetween = function (start, end) {\n    var months;\n\n    months = (end.getFullYear() - start.getFullYear()) * 12;\n    months -= start.getMonth() + 1;\n    months += end.getMonth();\n    return months <= 0 ? 0 : months;\n  }\n\n  this.yearsBetween = function (start, end) {\n    return (this.monthsBetween(start, end)/12);\n  }\n\n  this.renderYears = function () {\n    var yearsBetween = this.yearsBetween(this.startDate(), new Date(Date.now()));\n    for( var i = 0; i < yearsBetween; i++ ) {\n      var elm = this.createNodeForYear(this.startDate().getFullYear() + i)\n      this.yearsElement.appendChild(elm)\n    }\n\n  }\n\n  this.createNodeForYear = function (year) {\n    var elm    = el(\"span\");\n    var date   = new Date(year + '-01-01');\n    var yearsBetween = this.yearsBetween(this.startDate(), new Date(Date.now()));\n    var width  = 100/yearsBetween/12;\n    var monthsBetween = this.monthsBetween(this.startDate(), date);\n\n    elm.id = \"year-\" + year;\n    elm.classList.add('year')\n    elm.style.left = width*monthsBetween + \"%\";\n\n    if (year%1 == 0 || year == this.startDate().getFullYear()) {\n      elm.textContent = year;\n    }\n\n    elm.addEventListener('click', function () {\n      location.href = '/about#' + year;\n    })\n\n    return elm\n  }\n\n  this.initialize.apply(this, arguments);\n}\n","import {\n  empty\n} from './utilities.js';\n\nexport default function Content() {\n  this.initialize = function (site) {\n    this.site    = site;\n    this.body    = document.querySelectorAll('body')[0];\n    this.element = document.querySelectorAll('#content')[0];\n  }\n\n  this.updateContent = function (content) {\n    empty(this.element);\n    this.site.element.className = content.site_classes;\n    this.element.appendChild(content.content);\n  }\n\n  this.initialize.apply(this, arguments);\n}\n","import {\n  el\n} from './utilities.js';\n\nexport default function Router() {\n\n  this.initialize = function (site) {\n    this.site = site;\n\n    this.registerLinkListener();\n  }\n\n  this.getLink = function (element, depth) {\n    var elm;\n\n    if (!index)\n      var index = 1;\n\n    if (!depth)\n      var depth = 2;\n\n    while (index < depth) {\n      if (element.parentNode.tagName == 'A') {\n        elm = element.parentNode;\n        break;\n      }\n\n      index++;\n    }\n\n    return elm;\n  }\n\n  this.registerLinkListener = function () {\n    this.site.element.addEventListener('click', function (event) {\n      var link = event.target\n\n      if (!link.href) {\n        link = this.getLink(event.target)\n      };\n\n      if (link && !link.href.startsWith('mailto') && !this.stripOwnLocation(link.href).startsWith('http')) {\n        this.navigate(link.href)\n        event.preventDefault()\n        event.stopPropagation()\n      }\n\n    }.bind(this))\n\n    window.addEventListener('popstate', function (event) {\n      this.fetchContent(event.target.location.pathname)\n    }.bind(this))\n  }\n\n  this.stripOwnLocation = function (href) {\n    var link = href.replace('http://' + location.host, '')\n\n    if (link.startsWith(':')) {\n      link = link.replace(':' + location.port)\n    }\n\n    return link\n  }\n\n  this.parseHtml = function (aHTMLString) {\n    var parser = new DOMParser();\n    var doc = parser.parseFromString(aHTMLString, \"text/html\")\n\n    return doc;\n  }\n\n  this.getContent = function (response) {\n    var elm = this.parseHtml(response);\n\n    var content = el('div');\n    content.innerHTML = elm.querySelectorAll('#content')[0].innerHTML;\n\n    var site_classes = elm.querySelectorAll('#site')[0].classList\n    var title        = elm.querySelectorAll('title')[0].textContent;\n\n    return { content: content, site_classes: site_classes, title: title };\n  }\n\n  this.fetchContent = function (url) {\n    var that = this;\n\n    return fetch(url)\n      .then(function (response) {\n        return response.text();\n      })\n      .then(function (body) {\n        return that.getContent(body);\n      })\n      .then(function (content) {\n        that.site.content.updateContent(content);\n\n        return content;\n      })\n      .then(function (content) {\n        document.title = content.title;\n      });\n  }\n\n  this.navigate = function (url) {\n    this.fetchContent(url)\n      .then(function () {\n        history.pushState(null, null, url);\n      })\n  }\n\n  this.initialize.apply(this, arguments);\n}\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import Timeline from './timeline.js';\nimport Content from './content.js';\nimport Router from './router.js';\nimport { fetch as fetchPolyfill } from 'whatwg-fetch';\n\nexport default function Site() {\n\n  this.initialize = function (url) {\n    this.url      = url;\n\n    this.data     = {};\n    this.element  = document.querySelectorAll('#site')[0];\n    this.router   = new Router(this);\n    this.timeline = new Timeline(this);\n    this.content  = new Content(this);\n\n    this.getData();\n  }\n\n  this.getData = function () {\n    var that = this;\n\n    fetch(this.url)\n      .then(function(response) {\n        return response.json()\n      })\n      .then(function(json) {\n        var i = 0\n        json.events.forEach(function (event) {\n          setTimeout(function () {\n            that.timeline.addEvent(event);\n          }.bind(this), 1200 + 35*i)\n          i++;\n        });\n        return that.data = json;\n      })\n  }\n\n  this.initialize.apply(this, arguments);\n}\n","import Site from './site.js';\n\n(function(){\n  function sb(f){\n    for (var i=this.length;i;){\n      var o = this[--i];\n      this[i] = [].concat(f.call(o,o,i),o);\n    }\n    this.sort(function(a,b){\n      for (var i=0, len=a.length; i < len; ++i){\n        if (a[i]!=b[i]) return a[i ]< b[i]?-1:1;\n      }\n      return 0;\n    });\n    for (var i=this.length;i;){\n      this[--i]=this[i][this[i].length-1];\n    }\n    return this;\n  }\n\n  function mx(f) {\n    return this.sortBy(f)[this.length-1];\n  }\n\n  function mn(f) {\n    return this.sortBy(f)[0];\n  }\n\n  if (typeof Object.defineProperty === 'function'){\n    try{Object.defineProperty(Array.prototype,'sortBy',{value:sb}); }catch(e){}\n    try{Object.defineProperty(Array.prototype,'max',{value:mx}); }catch(e){}\n    try{Object.defineProperty(Array.prototype,'min',{value:mn}); }catch(e){}\n  }\n\n  if (!Array.prototype.sortBy) Array.prototype.sortBy = sb;\n  if (!Array.prototype.max) Array.prototype.max = mx;\n  if (!Array.prototype.min) Array.prototype.min = mn;\n})();\n\n\n(function () {\n  var site = new Site('/user.json');\n})();\n"]}